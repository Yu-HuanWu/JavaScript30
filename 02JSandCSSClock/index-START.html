<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>It's 5 O'Clock Somewhere</title>
  <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
</head>
<body>
  <background>
    <h1>It is 5 O'Clock in</h1>
    <h1 class="location"></h1>
    <div class="clock">
      <div class="clock-face">
        <div class="hand hour-hand"></div>
        <div class="hand min-hand"></div>
        <div class="hand second-hand"></div>
      </div>
    </div>
    <div class="localtime"></div>
    <div class="credit"></div>
  </background>


  <style>
    html {
      background: #070707;
      background-size: cover;
      font-family: 'helvetica neue';
      text-align: center;
      font-size: 10px;
    }

    body {
      margin: 0;
      font-size: 2rem;
      display: flex;
      flex-direction: column;
      flex: 1;
      min-height: 100vh;
      align-items: center;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      backdrop-filter: blur(8px);
    }

    background {
      backdrop-filter: blur(2px);
      margin: 0;
      font-size: 2rem;
      min-height: 100vh;
      min-width: 100vw;
      align-items: center;
    }

    .clock {
      width: 30rem;
      height: 30rem;
      border: 20px solid white;
      border-radius: 50%;
      background-color: #00000039;
      margin: 50px auto;
      position: relative;
      padding: 2rem;
      box-shadow:
        0 0 0 9px rgba(0,0,0,0.5),
        inset 0 0 0 3px #EFEFEF,
        inset 0 0 10px black,
        0 0 10px rgba(0,0,0,0.3);
    }

    .clock-face {
      position: relative;
      width: 100%;
      height: 100%;
      transform: translateY(-3px); /* account for the height of the clock hands */
    }

    .hand {
      width: 50%;
      height: 6px;
      background: black;
      position: absolute;
      top: 50%;
      transform-origin: 100%;
      transform: rotate(90deg);
      transition: all 0.05s;
      transition-timing-function: cubic-bezier(0.1, 2.7, 0.58, 1);
    }

    .hour-hand {
      width: 35%;
      right: 50%;
      background: rgb(255, 255, 255);
    }

    .min-hand {
      height: 6px;
      background: rgb(255, 255, 255);
    }

    .second-hand {
      height: 4px;
      width: 55%;
      right: 50%;
      background: #ff6600;
    }

    .no-transition {
      transition: none;
    }

    h1 {
      font-family: 'Pacifico', sans-serif;
      color: blue;
      text-shadow: 2px 2px 5px #0000002c;
      background: linear-gradient(110deg, #adefff 33%, rgba(0, 0, 0, 0) 33%), linear-gradient(110deg, #C5E7D7 34%, #88d8b0 34%);
      background-size: 400%;
      -webkit-text-fill-color: transparent;
      -webkit-background-clip: text;
      background-clip: text;
      animation: Gradient 5s ease infinite;
      -webkit-animation: Gradient 15s ease infinite;
      -moz-animation: Gradient 5s ease infinite;
    }

    @keyframes Gradient {
      0% {
        background-position: 30% 50%
      }
      50% {
        background-position: 25% 50%
      }
      100% {
        background-position: 30% 50%
      }
    }

    @-webkit-keyframes Gradient {
      0% {
        background-position: 30% 50%
      }
      50% {
        background-position: 25% 50%
      }
      100% {
        background-position: 30% 50%
      }
    }

    .credit {
      color:rgba(255, 255, 255, 0.6);
      position: absolute;
      top: 90%;
      right: 10%;
      text-shadow: 1px 1px 2px #0000004b;
    }

    .localtime {
      color:rgba(0, 0, 0, 0.8);
      text-shadow: 1px 1px 3px #d6d5d577;
    }

  </style>

  <script>
    const secondHand = document.querySelector('.second-hand');
    const minsHand = document.querySelector('.min-hand');
    const hourHand = document.querySelector('.hour-hand');
    const TimeZones = [
      { timezone: "Asia/Tokyo", name: "Tokyo, Japan", image: "backgrounds/tokyo.jpg", imageCredit: "RBeil" },
      { timezone: "Asia/Seoul", name: "Seoul, South Korea", image: "", imageCredit: "" },
      { timezone: "America/New_York", name: "New York, USA", image: "backgrounds/newyork.jpg", imageCredit: "Marco Bottigelli" },
      { timezone: "America/Sao_Paulo", name: "São Paulo, Brazil", image: "", imageCredit: "" },
      { timezone: "Africa/Cairo", name: "Cairo, Egypt", image: "", imageCredit: "" },
      { timezone: "America/Los_Angeles", name: "Los Angeles, USA", image: "", imageCredit: "" },
      { timezone: "Asia/Bangkok", name: "Chiang Mai, Thailand", image: "backgrounds/chiangmai.jpg", imageCredit: "RBeil" },
      { timezone: "Europe/Istanbul", name: "Istanbul, Turkey", image: "", imageCredit: "" },
      { timezone: "Europe/Paris", name: "Paris, France", image: "", imageCredit: "" },
      { timezone: "Europe/London", name: "London, England", image: "", imageCredit: "" },
      { timezone: "America/Chicago", name: "Chicago, USA", image: "", imageCredit: "" },
      { timezone: "America/Bogota", name: "Bogotá, Colombia", image: "backgrounds/bogota.jpg", imageCredit: "Mehdi33300" },
      { timezone: "Asia/Ho_Chi_Minh", name: "Ho Chi Minh City, Vietnam", image: "", imageCredit: "" },
      { timezone: "Asia/Taipei", name: "Taipei, Taiwan", image: "", imageCredit: "" },
      { timezone: "Asia/Hong_Kong", name: "Hong Kong", image: "", imageCredit: "" },
      { timezone: "America/Toronto", name: "Toronto, Canada", image: "backgrounds/toronto.jpg", imageCredit: "Arild Vågen" },
      { timezone: "Asia/Singapore", name: "Singapore", image: "", imageCredit: "" },
      { timezone: "Africa/Nairobi", name: "Nairobi, Kenya", image: "", imageCredit: "" },
      { timezone: "Africa/Accra", name: "Accra, Ghana", image: "", imageCredit: "" },
      { timezone: "Australia/Sydney", name: "Sydney, Australia", image: "", imageCredit: "" },
      { timezone: "Europe/Rome", name: "Rome, Italy", image: "", imageCredit: "" },
      { timezone: "Australia/Melbourne", name: "Melbourne, Australia", image: "", imageCredit: "" },
      { timezone: "Europe/Athens", name: "Athens, Greece", image: "", imageCredit: "" },
      { timezone: "Europe/Kiev", name: "Kyiv, Ukraine", image: "", imageCredit: "" },
      { timezone: "Asia/Pyongyang", name: "Pyongyang, North Korea", image: "", imageCredit: "" },
      { timezone: "Europe/Lisbon", name: "Lisbon, Portugal", image: "", imageCredit: "" },
      { timezone: "Asia/Baku", name: "Baku, Azerbaijan", image: "", imageCredit: "" },
      { timezone: "Africa/Algiers", name: "Algiers, Algeria", image: "", imageCredit: "" },
      { timezone: "America/Puerto_Rico", name: "Puerto Rico", image: "", imageCredit: "" },
      { timezone: "America/Vancouver", name: "Vancouver, Canada", image: "", imageCredit: "" },
      { timezone: "America/Havana", name: "Havana, Cuba", image: "backgrounds/havana.jpg", imageCredit: "possohh" },
      { timezone: "Africa/Tunis", name: "Tunis, Tunisia", image: "", imageCredit: "" },
      { timezone: "America/Belem", name: "Belém, Brazil", image: "", imageCredit: "" },
      { timezone: "America/Tijuana", name: "Tijuana, Mexico", image: "", imageCredit: "" },
      { timezone: "Australia/Perth", name: "Perth, Australia", image: "", imageCredit: "" },
      { timezone: "Europe/Amsterdam", name: "Amsterdam, Netherlands", image: "", imageCredit: "" },
      { timezone: "Asia/Almaty", name: "Almaty, Kazakhstan", image: "", imageCredit: "" },
      { timezone: "Pacific/Auckland", name: "Auckland, New Zealand", image: "", imageCredit: "" },
      { timezone: "Europe/Prague", name: "Prague, Czech Republic", image: "", imageCredit: "" },
      { timezone: "America/Guatemala", name: "Guatemala", image: "", imageCredit: "" },
      { timezone: "Asia/Yerevan", name: "Yerevan, Armenia", image: "", imageCredit: "" },
      { timezone: "Asia/Ulaanbaatar", name: "Ulaanbaatar, Mongolia", image: "", imageCredit: "" },
      { timezone: "America/Costa_Rica", name: "Costa Rica", image: "", imageCredit: "" },
      { timezone: "Asia/Tbilisi", name: "Tbilisi, Georgia", image: "", imageCredit: "" },
      { timezone: "America/Jamaica", name: "Jamaica", image: "backgrounds/jamaica.jpg", imageCredit: "Konstantin Kulikov" },
      { timezone: "Pacific/Fiji", name: "Fiji", image: "", imageCredit: "" },
      { timezone: "Indian/Reunion", name: "Réunion, France", image: "", imageCredit: "" },
      { timezone: "Asia/Jerusalem", name: "Jerusalem, Israel", image: "", imageCredit: "" },
      { timezone: "America/Guyana", name: "Guyana", image: "", imageCredit: "" },
      { timezone: "America/Winnipeg", name: "Winnipeg, Canada", image: "backgrounds/winnipeg.jpg", imageCredit: "Ken Gillespie" },
      { timezone: "Europe/Riga", name: "Riga, Latvia", image: "", imageCredit: "" },
      { timezone: "America/Cancun", name: "Playa del Carmen, Mexico", image: "backgrounds/playadelcarmen.jpeg", imageCredit: "Ivan Soto Cobos" },
      { timezone: "Asia/Sakhalin", name: "Sakhalin, Russia", image: "", imageCredit: "" },
      { timezone: "Atlantic/Cape_Verde", name: "Cape Verde", image: "", imageCredit: "" },
      { timezone: "Asia/Ashgabat", name: "Ashgabat, Turkmenistan", image: "", imageCredit: "" },
      { timezone: "America/Halifax", name: "Halifax, Canada", image: "", imageCredit: "" },
      { timezone: "Africa/Bissau", name: "Bissau, Guinea-Bissau", image: "", imageCredit: "" },
      { timezone: "Pacific/Honolulu", name: "Honolulu, USA", image: "", imageCredit: "" },
      { timezone: "Indian/Maldives", name: "Maldives", image: "", imageCredit: "" },
      { timezone: "America/Anchorage", name: "Anchorage, USA", image: "", imageCredit: "" },
      { timezone: "America/Barbados", name: "Barbados", image: "backgrounds/barbados.jpg", imageCredit: "Tryphosa Ho" },
      { timezone: "Asia/Yakutsk", name: "Yakutsk, Russia", image: "", imageCredit: "" },
      { timezone: "Asia/Aqtobe", name: "Aktobe, Kazakhstan", image: "", imageCredit: "" },
      { timezone: "Atlantic/Madeira", name: "Madeira, Portugal", image: "", imageCredit: "" },
      { timezone: "Atlantic/Azores", name: "Azores, Portugal", image: "", imageCredit: "" },
      { timezone: "America/Boise", name: "Boise, USA", image: "", imageCredit: "" },
      { timezone: "Asia/Kamchatka", name: "Kamchatka, Russia", image: "", imageCredit: "" },
      { timezone: "Pacific/Tahiti", name: "Tahiti, French Polynesia", image: "", imageCredit: "" },
      { timezone: "Pacific/Guam", name: "Guam", image: "", imageCredit: "" },
      { timezone: "America/Araguaina", name: "Araguaína, Brazil", image: "", imageCredit: "" },
      { timezone: "Asia/Kuching", name: "Kuching, Malaysia", image: "", imageCredit: "" },
      { timezone: "Atlantic/Reykjavik", name: "Reykjavík, Iceland", image: "", imageCredit: "" },
      { timezone: "Asia/Magadan", name: "Magadan, Russia", image: "", imageCredit: "" },
      { timezone: "Asia/Hovd", name: "Khovd, Mongolia", image: "", imageCredit: "" },
      { timezone: "Europe/Andorra", name: "Andorra", image: "", imageCredit: "" },
      { timezone: "Asia/Thimphu", name: "Thimphu, Bhutan", image: "", imageCredit: "" },
      { timezone: "Indian/Mahe", name: "Mahé, Seychelles", image: "", imageCredit: "" },
      { timezone: "Pacific/Tongatapu", name: "Tongatapu, Tonga", image: "", imageCredit: "" },
      { timezone: "Pacific/Efate", name: "Efate, Vanuatu", image: "", imageCredit: "" },
      { timezone: "Atlantic/Bermuda", name: "Bermuda", image: "", imageCredit: "" },
      { timezone: "America/Belize", name: "Belize", image: "", imageCredit: "" },
      { timezone: "Atlantic/Faroe", name: "Faroe Islands", image: "", imageCredit: "" },
      { timezone: "Pacific/Chuuk", name: "Chuuk, Micronesia", image: "", imageCredit: "" },
      { timezone: "Pacific/Apia", name: "Apia, Samoa", image: "", imageCredit: "" },
      { timezone: "Pacific/Pohnpei", name: "Pohnpei, Micronesia", image: "", imageCredit: "" },
      { timezone: "America/Juneau", name: "Juneau, USA", image: "", imageCredit: "" },
      { timezone: "Europe/Gibraltar", name: "Gibraltar", image: "", imageCredit: "" },
      { timezone: "Pacific/Majuro", name: "Majuro, Marshall Islands", image: "", imageCredit: "" },
      { timezone: "Pacific/Galapagos", name: "Galápagos Islands, Ecuador", image: "", imageCredit: "" },
      { timezone: "America/Whitehorse", name: "Whitehorse, Canada", image: "", imageCredit: "" },
      { timezone: "Pacific/Palau", name: "Palau", image: "", imageCredit: "" },
      { timezone: "America/Yellowknife", name: "Yellowknife, Canada", image: "", imageCredit: "" },
      { timezone: "America/Nuuk", name: "Nuuk, Greenland", image: "", imageCredit: "" },
      { timezone: "Pacific/Rarotonga", name: "Rarotonga, Cook Islands", image: "", imageCredit: "" },
      { timezone: "Asia/Anadyr", name: "Anadyr, Russia", image: "", imageCredit: "" },
      { timezone: "America/Dawson_Creek", name: "Dawson Creek, Canada", image: "", imageCredit: "" },
      { timezone: "America/Adak", name: "Adak, USA", image: "backgrounds/adak.jpg", imageCredit: "Ben Huff" },
      { timezone: "Pacific/Gambier", name: "Gambier Island, French Polynesia", image: "", imageCredit: "" },
      { timezone: "America/Noronha", name: "Fernando de Noronha, Brazil", image: "", imageCredit: "" },
    ];

    let fiveOClockLocations = [];
    let locations = {}
    TimeZones.forEach((e)=>{
      let time = new Date().toLocaleString('en-GB', { timeZone: e.timezone })
      let hour = time.substring(12, 14)

      if (locations[hour]) {
        locations[hour].push(e)
      } else {
        locations[hour] = [e]
      }

      if (time.substring(12,14) === '17') {
        console.log(e)
        fiveOClockLocations.push(e)
      }
    })

    const chosenLocation = fiveOClockLocations[Math.floor(Math.random() * fiveOClockLocations.length)]
    document.querySelector('.location').innerHTML = chosenLocation.name
    document.body.background = chosenLocation.image === "" ? "backgrounds/beerfrog.jpeg" : chosenLocation.image;
    document.querySelector('.credit').innerHTML = chosenLocation.imageCredit === "" ? "idk" : `Photo by ${chosenLocation.imageCredit}`;
    console.log(locations)
    function setDate() {
      const now = new Date();

      const seconds = now.getSeconds();
      const secondsDegrees = ((seconds / 60) * 360) + 90;
      if (secondsDegrees === 90) {
        secondHand.classList.add('no-transition');
      } else {
        secondHand.classList.remove('no-transition');
      }
      secondHand.style.transform = `rotate(${secondsDegrees}deg)`;

      const mins = now.getMinutes();
      const minsDegrees = ((mins / 60) * 360) + ((seconds / 60) * 6) + 90;
      minsHand.style.transform = `rotate(${minsDegrees}deg)`;

      const hour = 17
      const hourDegrees = ((hour / 12) * 360) + ((mins / 60) * 30) + 90;
      hourHand.style.transform = `rotate(${hourDegrees}deg)`;

      if (now.getHours() !== 17) {
        document.querySelector('.localtime').innerHTML = `but for you, it is still ${now.toLocaleString('en-US')} 😭`
      } else {
        document.querySelector('.localtime').innerHTML = "🍺 and for YOU as well! 🍺"
      }
    }

    setInterval(setDate, 1000);

    setDate();

  </script>
</body>
 </html>
